<div class="box" id="verifyBox">
  <h1>ðŸ”’ Verification Required</h1>
  <p>Enter a valid friend name:</p>

  <input id="nameInput" placeholder="Friend name">
  <input id="passwordInput" type="password" placeholder="Password (Austin only)" style="display:none;">

  <button id="verifyBtn">Verify</button>
  <p id="error"></p>
</div>

<div class="box" id="menuBox" style="display:none;">
  <h1>Main Menu</h1>

  <p>Welcome, <span id="player"></span>!</p>
  <p>Coins: ðŸ’° <span id="coins"></span></p>

  <button id="addCoinsBtn">+100 Coins (Owner)</button>
  <button id="signOutBtn">Sign Out</button>

  <h2>Gift Coins</h2>
  <input id="tradeFriend" placeholder="Friend name">
  <input id="tradeAmount" type="number" placeholder="Amount">
  <button id="tradeBtn">Send Coins</button>

  <p id="tradeError"></p>
</div>


body {
  background: radial-gradient(circle at center, #0b1020 0%, #020617 100%);
  color: white;
  font-family: Arial, sans-serif;
  display: flex;
  justify-content: center;
  align-items: flex-start;
  flex-direction: column;
  min-height: 100vh;
  padding: 20px;
  margin: 0;
}

.box {
  background: #1e293b;
  padding: 50px;
  border-radius: 12px;
  width: 80%;
  max-width: 600px;
  text-align: center;
  margin: 20px auto;
  border: 2px solid #38bdf8;
  box-shadow:
    0 0 20px rgba(56,189,248,0.35),
    inset 0 0 8px rgba(255,255,255,0.05);
}

h1 {
  font-size: 2.2em;
  text-shadow: 0 0 10px rgba(56,189,248,0.6);
}

input {
  width: 100%;
  padding: 15px;
  margin-top: 15px;
  border-radius: 6px;
  border: none;
  font-size: 1.1em;
  box-sizing: border-box;
}

button {
  width: 100%;
  padding: 15px;
  margin-top: 15px;
  border-radius: 6px;
  border: none;
  font-size: 1.1em;
  background: #38bdf8;
  color: black;
  cursor: pointer;
  font-weight: bold;
}

button:hover {
  background: #0ea5e9;
}

#error, #tradeError {
  color: #f87171;
  margin-top: 10px;
  font-weight: bold;
}
const ownerName = "Austin";
const ownerPassword = "vpg37kmq";
const validNames = ["Austin", "Mucheng", "Mark", "Ethan", "Antonio"];

document.addEventListener("DOMContentLoaded", () => {
  let friendsCoins = JSON.parse(localStorage.getItem("friendsCoins") || "{}");

  // Give starting coins
  validNames.forEach(name => {
    if (!(name in friendsCoins)) friendsCoins[name] = 500;
  });

  localStorage.setItem("friendsCoins", JSON.stringify(friendsCoins));

  const verifyBox = document.getElementById("verifyBox");
  const menuBox = document.getElementById("menuBox");

  const verifyBtn = document.getElementById("verifyBtn");
  const addCoinsBtn = document.getElementById("addCoinsBtn");
  const tradeBtn = document.getElementById("tradeBtn");
  const signOutBtn = document.getElementById("signOutBtn");

  const nameInput = document.getElementById("nameInput");
  const passwordInput = document.getElementById("passwordInput");

  // Show password box only if Austin typed
  nameInput.addEventListener("input", () => {
    if (nameInput.value.trim().toLowerCase() === "austin")
      passwordInput.style.display = "block";
    else
      passwordInput.style.display = "none";
  });

  function showMenu(name) {
    verifyBox.style.display = "none";
    menuBox.style.display = "block";

    document.getElementById("player").innerText = name;
    document.getElementById("coins").innerText = friendsCoins[name];

    if (name !== ownerName)
      addCoinsBtn.style.display = "none";
    else
      addCoinsBtn.style.display = "block";
  }

  // VERIFY LOGIN
  verifyBtn.addEventListener("click", () => {
    const name = nameInput.value.trim();
    const pass = passwordInput.value;

    const match = validNames.find(n => n.toLowerCase() === name.toLowerCase());

    if (!match) {
      document.getElementById("error").innerText = "Invalid name";
      return;
    }

    if (match === ownerName && pass !== ownerPassword) {
      document.getElementById("error").innerText = "Wrong password";
      return;
    }

    sessionStorage.setItem("playerName", match);
    document.getElementById("error").innerText = "";
    showMenu(match);
  });

  // OWNER ADD COINS
  addCoinsBtn.addEventListener("click", () => {
    const player = sessionStorage.getItem("playerName");
    if (player !== ownerName) return;

    friendsCoins[player] += 100;
    localStorage.setItem("friendsCoins", JSON.stringify(friendsCoins));
    document.getElementById("coins").innerText = friendsCoins[player];
  });

  // SIGN OUT
  signOutBtn.addEventListener("click", () => {
    sessionStorage.removeItem("playerName");
    menuBox.style.display = "none";
    verifyBox.style.display = "block";
    nameInput.value = "";
    passwordInput.value = "";
  });

  // SEND COINS (INSTANT GIFT)
  tradeBtn.addEventListener("click", () => {
    const player = sessionStorage.getItem("playerName");
    const friendInput = document.getElementById("tradeFriend").value.trim();
    let amount = Math.floor(Number(document.getElementById("tradeAmount").value));

    const recipient = validNames.find(n => n.toLowerCase() === friendInput.toLowerCase());

    if (!recipient)
      return document.getElementById("tradeError").innerText = "Friend not found";

    if (recipient === player)
      return document.getElementById("tradeError").innerText = "Cannot send to yourself";

    if (isNaN(amount) || amount <= 0)
      return document.getElementById("tradeError").innerText = "Enter valid amount";

    if (friendsCoins[player] < amount)
      return document.getElementById("tradeError").innerText = "Not enough coins";

    friendsCoins[player] -= amount;
    friendsCoins[recipient] += amount;

    localStorage.setItem("friendsCoins", JSON.stringify(friendsCoins));

    document.getElementById("coins").innerText = friendsCoins[player];
    document.getElementById("tradeError").style.color = "#4ade80";
    document.getElementById("tradeError").innerText =
      `Sent ${amount} coins to ${recipient}`;

    document.getElementById("tradeFriend").value = "";
    document.getElementById("tradeAmount").value = "";
  });

  // Auto login if already verified
  const storedPlayer = sessionStorage.getItem("playerName");
  if (storedPlayer) showMenu(storedPlayer);
});


